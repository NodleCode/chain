<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This crate provides trait `RetainMut` which provides `retain_mut` method for `Vec` and `VecDeque`."><meta name="keywords" content="rust, rustlang, rust-lang, retain_mut"><title>retain_mut - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../retain_mut/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate retain_mut</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.1.4</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all retain_mut's items</p></a><div class="block items"><ul><li><a href="#traits">Traits</a></li></ul></div><div id="sidebar-vars" data-name="retain_mut" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">retain_mut</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/retain_mut/lib.rs.html#1-177" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This crate provides trait <code>RetainMut</code> which
provides <code>retain_mut</code> method for <code>Vec</code> and <code>VecDeque</code>.</p>
<p><code>retain_mut</code> is basically the same as <code>retain</code> except that
it gives mutable reference of items to the predicate function.</p>
<p>Since there is no reason <code>retain</code> couldn’t have been designed this way,
this crate basically just copies the code from std with minor changes
to hand out mutable reference.
The code these impls are based on can be found in code comments of this crate.</p>
<p>This was probably a historical mistake in Rust library,
that <code>retain</code> should do this at the very beginning.
See <a href="https://github.com/rust-lang/rust/issues/25477">rust-lang/rust#25477</a>.</p>
<h2 id="compatibility" class="section-header"><a href="#compatibility">Compatibility</a></h2>
<p>Use <code>features = [&quot;std&quot;]</code> for compatibility with Rust version earlier than 1.36,
as <code>no_std</code> requires <code>alloc</code> crate to be stable.</p>
<h2 id="examples" class="section-header"><a href="#examples">Examples</a></h2><h3 id="vec" class="section-header"><a href="#vec"><code>Vec</code></a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">vec</span> <span class="op">=</span> <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];
<span class="ident">vec</span>.<span class="ident">retain_mut</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> { <span class="kw-2">*</span><span class="ident">x</span> <span class="kw-2">*</span><span class="op">=</span> <span class="number">3</span>; <span class="kw-2">*</span><span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">=</span><span class="op">=</span> <span class="number">0</span> });
<span class="macro">assert_eq!</span>(<span class="ident">vec</span>, [<span class="number">6</span>, <span class="number">12</span>]);</code></pre></div>
<h3 id="vecdeque" class="section-header"><a href="#vecdeque"><code>VecDeque</code></a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">deque</span> <span class="op">=</span> <span class="ident">VecDeque::from</span>(<span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);
<span class="ident">deque</span>.<span class="ident">retain_mut</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> { <span class="kw-2">*</span><span class="ident">x</span> <span class="kw-2">*</span><span class="op">=</span> <span class="number">3</span>; <span class="kw-2">*</span><span class="ident">x</span> <span class="op">%</span> <span class="number">2</span> <span class="op">=</span><span class="op">=</span> <span class="number">0</span> });
<span class="macro">assert_eq!</span>(<span class="ident">deque</span>, [<span class="number">6</span>, <span class="number">12</span>]);</code></pre></div>
</div></details><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="trait" href="trait.RetainMut.html" title="retain_mut::RetainMut trait">RetainMut</a></div><div class="item-right docblock-short"><p>Trait that provides <code>retain_mut</code> method.</p>
</div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="retain_mut" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script>
</body></html>